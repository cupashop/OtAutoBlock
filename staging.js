(function(){function w(a){try{return JSON.parse(a)}catch(c){return[]}}function r(a){var c=[],b=[],e=function(d,h){if("string"!=typeof d||!d.trim())return{};for(var g={},f=0;f<h.length;f++){var k=h[f];if("PATTERN_USER_DEFINED"===k.ResourceMatchType){if(d.includes(k.Tag)){g=k;break}}else if("PATTERN"===k.ResourceMatchType&&k.compiledRegex)try{if(k.compiledRegex.test(d)){g=k;break}}catch(E){console.warn("Invalid regex in blockList:",k.Tag,E)}else{if(k.Tag===d){g=k;break}var l=void 0,m=k.Tag;var F=(m=
-1!==m.indexOf("http:")?m.replace("http:",""):m.replace("https:",""),-1!==(l=m.indexOf("?"))?m.replace(m.substring(l),""):m);if(d&&(-1!==d.indexOf(F)||-1!==k.Tag.indexOf(d))){g=k;break}}}return g}(a,G);return e.CategoryId&&(c=e.CategoryId),e.Vendor&&(b=e.Vendor.split(":")),!e.Tag&&H&&(b=c=function(d){var h=[],g=function(f){var k=document.createElement("a");return k.href=f,-1!==(f=k.hostname.split(".")).indexOf("www")||2<f.length?f.slice(1).join("."):k.hostname}(d);return h=x.some(function(f){return f===
g})?["C0004"]:h}(a)),{categoryIds:c,vsCatIds:b}}function y(a){return!a||!a.length||(a&&window.OptanonActiveGroups?a.every(function(c){return-1!==window.OptanonActiveGroups.indexOf(","+c+",")}):void 0)}function n(a,c){void 0===c&&(c=null);var b=window,e=b.OneTrust&&b.OneTrust.IsVendorServiceEnabled;b=e&&b.OneTrust.IsVendorServiceEnabled();return"Categories"===t||"All"===t&&e&&!b?y(a):("Vendors"===t||"All"===t&&e&&b)&&y(c)}function p(a){a=a.getAttribute("class")||"";return-1!==a.indexOf("optanon-category")||
-1!==a.indexOf("ot-vscat")}function q(a){return a.hasAttribute("data-ot-ignore")}function z(a,c,b){void 0===b&&(b=null);var e=a.join("-"),d=b&&b.join("-"),h=c.getAttribute("class")||"",g="",f=!1;a&&a.length&&-1===h.indexOf("optanon-category-"+e)&&(g=("optanon-category-"+e).trim(),f=!0);b&&b.length&&-1===h.indexOf("ot-vscat-"+d)&&(g+=" "+("ot-vscat-"+d).trim(),f=!0);f&&c.setAttribute("class",g+" "+h)}function A(a,c,b){void 0===b&&(b=null);var e;a=a.join("-");b=b&&b.join("-");return-1===c.indexOf("optanon-category-"+
a)&&(e=("optanon-category-"+a).trim()),-1===c.indexOf("ot-vscat-"+b)&&(e+=" "+("ot-vscat-"+b).trim()),e+" "+c}function B(a){var c,b=r(a.src||"");(b.categoryIds.length||b.vsCatIds.length)&&(z(b.categoryIds,a,b.vsCatIds),n(b.categoryIds,b.vsCatIds)||(a.type="text/plain"),a.addEventListener("beforescriptexecute",c=function(e){"text/plain"===a.getAttribute("type")&&e.preventDefault();a.removeEventListener("beforescriptexecute",c)}))}function C(a){var c=a.src||"",b=r(c);(b.categoryIds.length||b.vsCatIds.length)&&
(z(b.categoryIds,a,b.vsCatIds),n(b.categoryIds,b.vsCatIds)||(a.removeAttribute("src"),a.setAttribute("data-src",c)))}var v=function(){return(v=Object.assign||function(a){for(var c,b=1,e=arguments.length;b<e;b++)for(var d in c=arguments[b])Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a}).apply(this,arguments)},I=w('[{"Tag":"https://www.youtube.com/iframe_api","CategoryId":["C0004"],"Vendor":null},{"Tag":"https://shop-stg.cambridge.org","CategoryId":["C0002","C0003","C0004"],"Vendor":null},{"Tag":"https://www.googletagmanager.com/gtm.js","CategoryId":["C0002"],"Vendor":null},{"Tag":"https://www.google-analytics.com/analytics.js","CategoryId":["C0002"],"Vendor":null},{"Tag":"https://shop-stg.cambridge.org/_nuxt/BV2B34cq.js","CategoryId":["C0003","C0004"],"Vendor":null},{"Tag":"https://script.hotjar.com/modules.46241a6ac0a409aaa6bc.js","CategoryId":["C0002"],"Vendor":null},{"Tag":"https://www.googletagmanager.com/gtag/js","CategoryId":["C0002"],"Vendor":null},{"Tag":"https://script.hotjar.com/modules.a3cb6dcf71aec7e1a87f.js","CategoryId":["C0002"],"Vendor":null}]'),
H=JSON.parse("true"),G=function(){for(var a=0,c=0,b=arguments.length;c<b;c++)a+=arguments[c].length;a=Array(a);var e=0;for(c=0;c<b;c++)for(var d=arguments[c],h=0,g=d.length;h<g;h++,e++)a[e]=d[h];return a}(I||[],w("[]").map(function(a){var c=null;if("PATTERN"===(null==a?void 0:a.ResourceMatchType)&&"string"==typeof a.Tag)try{c=new RegExp(a.Tag)}catch(b){console.warn('Invalid regex pattern: "'+a.Tag+'"',b)}return v(v({},a),{compiledRegex:c})})||[]),t=JSON.parse('"Categories"'),x=(x="addthis.com addtoany.com adsrvr.org amazon-adsystem.com bing.com bounceexchange.com bouncex.net criteo.com criteo.net dailymotion.com doubleclick.net everesttech.net facebook.com facebook.net googleadservices.com googlesyndication.com krxd.net liadm.com linkedin.com outbrain.com rubiconproject.com sharethis.com taboola.com twitter.com vimeo.com yahoo.com youtube.com".split(" ")).filter(function(a){if("null"!==
a&&a.trim().length)return a}),u=["embed","iframe","img","script"],D=((new MutationObserver(function(a){Array.prototype.forEach.call(a,function(c){Array.prototype.forEach.call(c.addedNodes,function(e){1!==e.nodeType||-1===u.indexOf(e.tagName.toLowerCase())||p(e)||q(e)||("script"===e.tagName.toLowerCase()?B:C)(e)});var b=c.target;!c.attributeName||p(b)&&q(b)||("script"===b.nodeName.toLowerCase()?B(b):-1!==u.indexOf(c.target.nodeName.toLowerCase())&&C(b))})})).observe(document.documentElement,{childList:!0,
subtree:!0,attributes:!0,attributeFilter:["src"]}),document.createElement);document.createElement=function(){for(var a,c,b=[],e=0;e<arguments.length;e++)b[e]=arguments[e];return"script"===b[0].toLowerCase()||-1!==u.indexOf(b[0].toLowerCase())?(a=D.bind(document).apply(void 0,b),c=a.setAttribute.bind(a),Object.defineProperties(a,{src:{get:function(){try{return!/^(https?:|\/\/|file:|ftp:|data:|blob:)/i.test(a.getAttribute("src"))&&a.getAttribute("src")?(new URL(a.getAttribute("src"),document.baseURI)).href:
a.getAttribute("src")||""}catch(d){return a.getAttribute("src")||""}},set:function(d){var h=b[0],g,f,k,l="";l=r(l="string"==typeof d||d instanceof Object?d.toString():l);return f=h,k=a,!(g=l).categoryIds.length&&!g.vsCatIds.length||"script"!==f.toLowerCase()||p(k)||n(g.categoryIds,g.vsCatIds)||q(k)?(f=h,g=a,!(k=l).categoryIds.length||-1===u.indexOf(f.toLowerCase())||p(g)||n(k.categoryIds,k.vsCatIds)||q(g)?c("src",d):(a.removeAttribute("src"),c("data-src",d),(h=a.getAttribute("class"))||c("class",
A(l.categoryIds,h||"",l.vsCatIds)))):(c("type","text/plain"),c("src",d)),!0}},type:{get:function(){return a.getAttribute("type")||""},set:function(d){return g=c,f=r((h=a).src||""),g("type",!f.categoryIds.length&&!f.vsCatIds.length||p(h)||n(f.categoryIds,f.vsCatIds)||q(h)?d:"text/plain"),!0;var h,g,f}},class:{set:function(d){return g=c,!(f=r((h=a).src)).categoryIds.length&&!f.vsCatIds.length||p(h)||n(f.categoryIds,f.vsCatIds)||q(h)?g("class",d):g("class",A(f.categoryIds,d,f.vsCatIds)),!0;var h,g,f}}}),
a.setAttribute=function(d,h,g){"type"!==d&&"src"!==d||g?c(d,h):a[d]=h},a):D.bind(document).apply(void 0,b)}})();